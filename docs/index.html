<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="version" content="#versao#" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=0.9, shrink-to-fit=no"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />

    <!-- bootstrap4-toggle-->
    <link
      href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css"
      rel="stylesheet"
    />
    <title>Casa iot</title>
  </head>
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-database.js"></script>
  <script src="js/app.js"></script>

  <body>
    <header>
      <div
        class="d-flex flex-column align-items-center p-3 px-md-4
          mb-3 bg-white border-bottom">
        <nav class="my-2 my-md-0 mr-md-3">
          <h5 class="text-center my-0 mr-md-auto font-weight-normal">
            Casa iot
          </h5>
          <a class="p-2 text-dark" href="index.html">Dashboard</a> |
          <!--<a class="p-2 text-dark" href="list_users.html">Usuarios</a> |-->
          <a class="p-2 text-dark" href="list_devices.html">Dispositivos</a> |
          <a class="p-2 text-dark" href="list_sensor_dht11.html">Sensores</a>
          <!--          <a class="p-2 text-dark" href="cad_user.html">Usuarios</a> |-->
          <!--          <a class="p-2 text-dark" href="cad_device.html">Usuarios</a> |-->
        </nav>
      </div>
    </header>





      <div class="container mt-2">
        <div class="card mb-3 border-primary">
          <!--azul-->
          <div class="card-body justify-content-center">
            <div class="col-12 text-info">
              DHT-11 | N. | ID | Temperatura | Umidade | Rele1 | Rele2
            </div>
            <div class="col-12">
              <ul id="devices_set_DHT11"></ul>
              <script src="js/database_device_set_DHT11.js"></script>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container mt-2">
        <div class="card mb-3 border-primary">
          <!--azul-->
          <div class="card-body justify-content-center">
            <div class="col-12 text-info">
              SCT-13 | N. | ID | Corrente | Potencia | Rele1 | Rele2
            </div>
              <div class="col-12">
                <ul id="devices_set_SCT13"></ul>
                <script src="js/database_device_set_SCT13.js"></script>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
    <v-select :options="DHT111" v-model="js/database_DHT11.js"></v-select>

    <div class="container mt-2">
      <div class="card mb-3 border-primary">
        <div class="card-body justify-content-center">
          <!-- <div class="card-title">Sensores</div> -->
          <div class="d-flex flex-column mb-3">
            <div class="row d-flex justify-content-around">
              <div class="col-4 text-info">Servidor</div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/temp.svg"
                  alt=""
                  width="24px"
                />
                30 ºC
              </div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/humd.svg"
                  alt=""
                  width="24px"
                />
                50 %
              </div>
            </div>
            <!--
            <div class="row d-flex justify-content-around">
              <div class="col-4 text-info">Sala</div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/temp.svg"
                  alt=""
                  width="24px"
                />
                30 ºC
              </div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/humd.svg"
                  alt=""
                  width="24px"
                />
                50 %
              </div>
            </div>

            <div class="row d-flex justify-content-around">
              <div class="col-4 text-info">Quarto</div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/temp.svg"
                  alt=""
                  width="24px"
                />
                32 ºC
              </div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/humd.svg"
                  alt=""
                  width="24px"
                />
                55 %
              </div>
            </div>

            <div class="row d-flex justify-content-around">
              <div class="col-4 text-info">Lab</div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/temp.svg"
                  alt=""
                  width="24px"
                />
                41 ºC
              </div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/humd.svg"
                  alt=""
                  width="24px"
                />
                56 %
              </div>
            </div>
          -->
            <!--
            <div class="row d-flex justify-content-around">
              <div class="col-4 text-info">Print3D</div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/temp.svg"
                  alt=""
                  width="24px"
                />
                31 ºC
              </div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/humd.svg"
                  alt=""
                  width="24px"
                />
                54 %
              </div>
            </div>-->

            <div class="row d-flex justify-content-around">
              <div class="col-4">
                <a class="text-info" href="Sensor.html">
                  Garagem / Irrigação
                </a>
              </div>

              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/temp.svg"
                  alt=""
                  width="24px"
                />
                23 ºC
              </div>
              <div class="col-4">
                <img
                  src="https://raw.githubusercontent.com/caioelizio/casa_iot/master/images/humd.svg"
                  alt=""
                  width="24px"
                />
                15 %
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-database.js"></script>
    <script src="js/app.js"></script>

    <footer class="pt-4 my-md-2 pt-md-2 border-top">
      <div class="container mt-12">
        <div class="col-12">
          <small class="d-block mb-3 text-muted">© 2016-2021</small>
        </div>
      </div>
    </footer>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>


  </body>
</html>

<!--Script-->
<script>
  library.add(faStar, faPlus)
  
  export default {
    components: {
      PageTitle,
      'font-awesome-icon': FontAwesomeIcon,
    },
    data: () => ({
      heading: 'Formulário do dispositivo',
      subheading: ' ',
      icon: 'pe-7s-graph text-success',
      create: false,
      currentPage: 1,
      perPage: 10,
      filter: '',
      options: ['NodeMcu ESP-12', 'ESP-01', 'Wemos D1 mini'],
      options_lc: ['Listar Localizacao'],
      options_eq: ['Listar equipamentos'],
  
      fields: [
        { key: 'status', label: 'Status' },
        { key: 'id', label: 'ID' },
        { key: 'model', label: 'Model' },
        { key: 'localization', label: 'Loc.' },
        { key: 'equipment', label: 'Equip.' },
        { key: 'cReleName1', label: 'Rele1' },
        { key: 'cReleName2', label: 'Rele2' },
        //{ key: 'tag', label: 'Tag' },
        //{ key: 'timestamp', label: 'Time stamp' },
        //{ key: 'tipo', label: 'Tipo' },
        //{ key: 'upTime', label: 'UP Time' },
        //{ key: 'versionSis', label: 'Version' },
        {
          key: 'created',
          label: 'Criação',
          formatter: date => {
            return new Date(date).toLocaleDateString()
          },
        },
        {
          key: 'updated',
          label: 'Alterado',
          formatter: date => {
            if (date) return new Date(date).toLocaleDateString()
          },
        },
        { key: 'actions', label: 'Ações' },
      ],
  
      infoModal: {
        id: 'info-modal',
        title: '',
        content: '',
      },
  
      sensor: {
        key: '',
        id: '',
        model: '',
        localization: '',
        equipment: '',
        cReleName1: '',
        cReleName2: '',
        status: '',
      },
    }),
  
    computed: {
      ...mapState('Firebase', ['sensors']),
      ...mapGetters('Firebase', ['equipmentList', 'localizationList']),
  
      rows() {
        return this.sensors.length
      },
    },
  
    methods: {
      ...mapActions('Firebase', ['setSensors', 'saveSensor', 'removeSensor', 'setEquipments', 'setLocalizations']),
  
      toggle() {
        this.create = !this.create
      },
  
      formatDate(value) {
        var date = new Date(value)
        return date.toLocaleString()
      },
  
      fillForm(sensor) {
        this.key = sensor.key
      },
  
      save() {
        this.saveSensor({
          ...this.sensor,
        })
        this.reset()
      },
  
      edit(sensor) {
        this.sensor = { ...sensor }
        this.create = true
      },
  
      remove(sensor) {
        const question = {
          title: `Excluir ${sensor.name}?`,
          text: 'Você não poderá reverter isso!',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Sim, exclua!',
        }
  
        this.$swal.fire(question).then(result => {
          if (result.isConfirmed) {
            this.removeSensor({ ...sensor })
            this.$swal.fire('Removido!', `${sensor.name} foi excluído`, 'success')
          }
        })
      },
  
      info(item, index, button) {
        this.infoModal.title = `Row index: ${index}`
        this.infoModal.content = JSON.stringify(item, null, 2)
        this.$root.$emit('bv::show::modal', this.infoModal.id, button)
      },
  
      resetInfoModal() {
        this.infoModal.title = ''
        this.infoModal.content = ''
      },
  
      reset() {
        this.create = false
        this.sensor = {
          key: '',
          id: '',
          model: '',
          localization: 'dddd',
          equipment: '',
          cReleName1: '',
          cReleName2: '',
          status: '',
        }
      },
    },
  
    mounted() {
      this.setSensors({})
      this.setEquipments({})
      this.setLocalizations({})
    },
  }
  </script>